<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" >
<title>LCUI &#8250; 动态 &#8250; 开发日志</title>
<link rel="icon" href="lc-soft.png" type="image/png">
<meta name="keywords" content="GUI,LCSoft,LCDT,LCUI,Embedded,linux,liuchao,opensource,freesoft,C" >
<meta name="description" content="LCUI 0.10.0 & 0.12.0 开发日志" >
<meta name="robots" content="all" >
<meta name="author" content="LC-Soft" >
<link type="text/css" rel="stylesheet" href="../files/css/main.css"> 
<link type="text/css" rel="stylesheet" href="../files/css/dev_log.css"> 
</head>
  <body style="margin-top: 100px;"class="my_body"> 
    <script type="text/javascript" src="../files/js/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="../files/js/ms-script.jsx"></script>
    <script type="text/javascript" src="../files/js/menu-effect.js"></script>
    <script type="text/javascript" src="../files/js/titlemenu.zh-cn.js"></script> 
    <script type="text/javascript" src="../files/audiojs/float_musicplayer.js"></script> 
	
	<div style="padding-top: 30px;"> 

    <!-- 上面是标题栏区域 --> 
<div class="entry-content">
<center><h1>LCUI 0.10.0 & 0.12.0</h1></center>
<hr>
<p>起初，仿照VC的工具箱中的窗口控件，添加了PictureBox部件、Label部件，这些部件的相关属性及命名，也借鉴了它。</p>
<p>头文件的编写，我先仿照了FreeType2的头文件编写风格，也就是先#include&lt;XXX_Build.h&gt;，要使用哪个头文件里的函数声明时，直接使用 #include _XX_XX_H_宏，这个宏但是XXX_Build.h里定义的；但遇到了一些问题，头文件包含头文件，循环包含，最终编译器编译时一直在循环打印同一个错误，关于这个问题，解决方法是使用宏进行头文件保护；</p>
<p>在后来，发现有嵌套关系的结构体如果定义在其它头文件里，编译器会报错；调试了一段时间，决定直接将结构体及相关数据的定义写在一个头文件里，其余头文件写函数声明；在解决结构体嵌套问题时，对gtk感到好奇：它是如何解决头文件相关的问题的？于是参考了gtk的头文件，把我的头文件中的结构体的定义方式稍微改了一下，但也只是改了一下而已。</p>
<p><span id="more-6"></span></p>
<p>图形界面，字体显示是少不了的，相关文档以及例子很少，只有自己看FreeType源码目录里的文档，借助Google翻译来了解大致意思，光看也没用，需要代码例子来参考，网上的示例代码比较少，大多是清一色的获取单个文字字形的示例代码，文字对齐问题没解决(如下图所示)。</p>
<p></p><center><img src="http://www.lcui.org/files/images/devlog/helloworld.gif" alt="hellworld"></center>FreeType获取字体字形需要该字体对应的字符的unicode编码，而源代码中使用的是char型字符串，不是wchar_t型，这需要实现一个功能：将char型字符串内的字符编码转换成unicode编码并保存至wchar_t型字符串。我用了iconv库提供的相关函数实现了字符编码转换。<p></p>
<p>图形的显示，不再是利用mgaview程序源码中的write_to_fb函数显示图形，借鉴了它的代码，自己重新写了一个函数，可以用这个函数往屏幕写内容。</p>
<p>随后，实现了PictureBox部件，图片的缩放功能还未添加，添加后，可以进行图片的放大和缩小的操作。</p>
<p>由于PictureBox部件的实现，我又想做个照片查看器，于是，第一个版本的照片查看器就诞生了。</p>
<p></p><center><img src="http://www.lcui.org/files/images/devlog/use_lcpv_1.jpg" alt="use_lcpv_1"><img src="http://www.lcui.org/files/images/devlog/use_lcpv_2.jpg" alt="use_lcpv_2"></center><center><img src="http://www.lcui.org/files/images/devlog/use_lcpv_3.jpg" alt="use_lcpv_3"><img src="http://www.lcui.org/files/images/devlog/use_lcpv_4.jpg" alt="use_lcpv_4"></center>该版本的照片查看器使用了Label部件在窗口内的左上角显示图片信息，2秒后，逐渐减少Label部件的alpha值，直到为0（完全透明），方向键移动浏览范围，i键调出图片信息标签（不透明）。还不能放大和缩小图片，因为没有加入图像缩放算法，PictureBox部件无法对图片使用图像缩放算法。<p></p>
<p>以上是老版本的LCUI库的开发过程，没做过多的说明。</p>
</div>
<!-- Duoshuo Comment BEGIN -->
	<div class="ds-thread" data-thread-key="2" data-title="LCUI 0.10.0 & 0.12.0" data-category="LCUI-Dev"  data-url="http://www.lcui.org/zh-cn/devlog-lcui-0.10.0+0.12.0.html"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"lc-soft-lcui"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- Duoshuo Comment END -->
    <!-- 网页底部的内容 -->
    <hr>
    <table class="my_style" width="100%">
      <tr>
        <td align="left">
          网页由
          <a href="mailto:lc-soft@live.cn">
            刘超
          </a>
          维护
        </td> 
        <td align="right">
          <a target="_blank" href="http://validator.w3.org/check/referer">
            <img border=0 src="http://www.w3.org/Icons/valid-html401-blue" alt="Valid HTML 4.0!"
            height=31 width=88>
          </a>
        </td>
      </tr>
      <tr>
        <td>
          最后更新: 2012-10-23
        </td> 
        <td align="right">
		<a target="_blank" href="http://sighttp.qq.com/authd?IDKEY=af7bcac3a71b6cf237e715c4f3beffc6e53bdf1075cb4674">
		  <img border="0" src="http://wpa.qq.com/imgd?IDKEY=af7bcac3a71b6cf237e715c4f3beffc6e53bdf1075cb4674&amp;pic=45" alt="通过QQ与作者进行交流" title="通过QQ与作者进行交流"></a>
          <script type="text/javascript" src="../files/js/baidu-code.js">
          </script>
		  <script src="http://s23.cnzz.com/stat.php?id=4262888&amp;web_id=4262888&amp;show=pic1" type="text/javascript"></script>
        </td>
      </tr>
    </table>
  </div>
  </body>



</html>
<!-- page-front.tpl -->
